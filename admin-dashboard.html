<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Dashboard - Kapruka</title>
  <link rel="icon" type="image/png" href="https://play-lh.googleusercontent.com/XPaIW4RsTkd8au1rBlcwAtdyynz9pZyPVn3QPK4gXbboroWxFI3hpVhn18IrIBrUtztj=w240-h480-rw">
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
    }
    .container { max-width: 1800px; margin: 0 auto; }
    
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    /* HEADER STYLES */
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .header {
      text-align: center;
      margin-bottom: 40px;
      animation: fadeInDown 0.6s ease;
    }
    @keyframes fadeInDown {
      from { opacity: 0; transform: translateY(-30px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .kapruka-logo {
      width: 100px;
      height: 100px;
      margin: 0 auto 20px;
      border-radius: 50%;
      overflow: hidden;
      box-shadow: 0 10px 40px rgba(0,0,0,0.3);
      animation: float 3s ease-in-out infinite;
    }
    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }
    .kapruka-logo img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    h1 {
      font-family: 'Playfair Display', serif;
      font-size: 42px;
      background: linear-gradient(135deg, #FFD700, #FFF, #FFD700);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 8px;
    }
    .subtitle {
      color: rgba(255,255,255,0.9);
      font-size: 14px;
      letter-spacing: 2px;
      text-transform: uppercase;
      font-weight: 500;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    /* LOGIN CARD */
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .login-card {
      background: white;
      padding: 50px;
      border-radius: 24px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      max-width: 450px;
      margin: 0 auto;
      animation: fadeIn 0.6s ease;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.95); }
      to { opacity: 1; transform: scale(1); }
    }
    .login-card h2 {
      font-family: 'Playfair Display', serif;
      color: #667eea;
      font-size: 28px;
      margin-bottom: 30px;
      text-align: center;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    /* TABS */
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .admin-content { display: none; }
    .tabs {
      display: flex;
      gap: 12px;
      margin-bottom: 30px;
      flex-wrap: wrap;
      background: rgba(255,255,255,0.1);
      padding: 15px;
      border-radius: 16px;
      backdrop-filter: blur(10px);
    }
    .tab-btn {
      padding: 14px 24px;
      background: rgba(255,255,255,0.2);
      color: white;
      border: 2px solid rgba(255,255,255,0.3);
      border-radius: 12px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 600;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .tab-btn:hover {
      background: rgba(255,255,255,0.3);
      border-color: #FFD700;
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }
    .tab-btn.active {
      background: linear-gradient(135deg, #667eea, #764ba2);
      border-color: #FFD700;
      box-shadow: 0 8px 25px rgba(102,126,234,0.4);
    }
    .tab-btn.logout {
      margin-left: auto;
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      border-color: transparent;
    }
    
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    /* TAB CONTENT */
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .tab-content { display: none; animation: fadeIn 0.4s ease; }
    .tab-content.active { display: block; }
    
    .card {
      background: white;
      padding: 35px;
      border-radius: 20px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.15);
      margin-bottom: 30px;
      animation: slideUp 0.5s ease;
    }
    @keyframes slideUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .card h2 {
      font-family: 'Playfair Display', serif;
      color: #667eea;
      font-size: 26px;
      margin-bottom: 25px;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    /* FORM STYLES */
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .form-group { margin-bottom: 20px; }
    label {
      display: block;
      color: #667eea;
      font-weight: 600;
      margin-bottom: 10px;
      font-size: 14px;
    }
    input, select, textarea {
      width: 100%;
      padding: 14px;
      border: 2px solid #e8e8e8;
      border-radius: 12px;
      font-size: 15px;
      font-family: 'Inter', sans-serif;
      transition: all 0.3s ease;
    }
    input:focus, select:focus, textarea:focus {
      outline: none;
      border-color: #667eea;
      box-shadow: 0 0 0 4px rgba(102,126,234,0.1);
    }
    textarea { min-height: 100px; resize: vertical; }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    /* BUTTONS */
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .btn {
      padding: 12px 24px;
      border: none;
      border-radius: 10px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }
    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }
    .btn-primary {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
    }
    .btn-success {
      background: linear-gradient(135deg, #11998e, #38ef7d);
      color: white;
    }
    .btn-warning {
      background: linear-gradient(135deg, #f093fb, #f5576c);
      color: white;
    }
    .btn-danger {
      background: linear-gradient(135deg, #eb3349, #f45c43);
      color: white;
    }
    .btn-secondary {
      background: linear-gradient(135deg, #a8edea, #fed6e3);
      color: #667eea;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    /* TABLE STYLES */
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .table-container {
      overflow-x: auto;
      margin-top: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.05);
    }
    table {
      width: 100%;
      border-collapse: collapse;
      background: white;
    }
    th {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      padding: 16px;
      text-align: left;
      font-weight: 600;
      font-size: 13px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      position: sticky;
      top: 0;
      z-index: 10;
    }
    td {
      padding: 16px;
      border-bottom: 1px solid #f0f0f0;
      font-size: 14px;
      color: #333;
    }
    tr:hover {
      background: #f8f9ff;
    }
    tr:last-child td {
      border-bottom: none;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    /* BADGES */
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .badge {
      display: inline-block;
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    .badge-pending { background: #FFF3CD; color: #856404; }
    .badge-approved { background: #D4EDDA; color: #155724; }
    .badge-rejected { background: #F8D7DA; color: #721C24; }
    .badge-working { background: #D1ECF1; color: #0C5460; }
    .badge-live { background: #D1F2EB; color: #0C5460; }
    .badge-completed { background: #E2E3E5; color: #383D41; }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    /* ACTION BUTTONS */
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .action-btns {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }
    .action-btns button {
      padding: 8px 14px;
      font-size: 12px;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    /* LOADING SPINNER */
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .loading {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(102,126,234,0.95);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      backdrop-filter: blur(10px);
    }
    .spinner {
      width: 60px;
      height: 60px;
      border: 5px solid rgba(255,255,255,0.3);
      border-top-color: #FFD700;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    @keyframes spin { to { transform: rotate(360deg); } }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    /* MODAL */
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .modal {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.7);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 10000;
      padding: 20px;
      backdrop-filter: blur(5px);
    }
    .modal-content {
      background: white;
      padding: 40px;
      border-radius: 24px;
      max-width: 700px;
      max-height: 90vh;
      overflow-y: auto;
      position: relative;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      animation: modalSlideIn 0.3s ease;
    }
    @keyframes modalSlideIn {
      from { opacity: 0; transform: translateY(-50px) scale(0.9); }
      to { opacity: 1; transform: translateY(0) scale(1); }
    }
    .modal h3 {
      font-family: 'Playfair Display', serif;
      color: #667eea;
      font-size: 26px;
      margin-bottom: 25px;
    }
    .close-modal {
      position: absolute;
      top: 20px;
      right: 20px;
      background: #f5f5f5;
      border: none;
      width: 36px;
      height: 36px;
      border-radius: 50%;
      font-size: 20px;
      cursor: pointer;
      color: #666;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .close-modal:hover {
      background: #667eea;
      color: white;
      transform: rotate(90deg);
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    /* RADIO BUTTONS */
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .radio-group {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    .radio-label {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 14px 18px;
      border: 2px solid #e8e8e8;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
      background: #fafafa;
    }
    .radio-label:hover {
      border-color: #667eea;
      background: #f8f9ff;
      transform: translateX(5px);
    }
    .radio-label input[type="radio"] {
      width: 20px;
      height: 20px;
      cursor: pointer;
      padding: 0;
      accent-color: #667eea;
    }
    .radio-label input[type="radio"]:checked + span {
      color: #667eea;
      font-weight: 600;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    /* SLOT SELECTION */
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .slot-item {
      padding: 16px;
      margin-bottom: 12px;
      border: 2px solid #e8e8e8;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
      background: white;
    }
    .slot-item:hover {
      border-color: #667eea;
      box-shadow: 0 4px 12px rgba(102,126,234,0.15);
      transform: translateX(5px);
    }
    .slot-item.selected {
      border-color: #FFD700;
      background: linear-gradient(135deg, #FFF9E6, #FFFEF0);
      box-shadow: 0 6px 20px rgba(255,215,0,0.3);
    }
    .slot-available {
      border-color: #4CAF50;
    }
    .slot-booked {
      background: #f5f5f5;
      cursor: not-allowed;
      opacity: 0.6;
    }
    .slot-booked:hover {
      transform: none;
      box-shadow: none;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    /* CALENDAR STYLES */
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .calendar-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
      flex-wrap: wrap;
      gap: 20px;
    }
    .month-nav {
      display: flex;
      align-items: center;
      gap: 20px;
    }
    .month-nav button {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      border: none;
      padding: 12px 20px;
      border-radius: 10px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s ease;
    }
    .month-nav button:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(102,126,234,0.4);
    }
    .month-nav h3 {
      font-size: 22px;
      color: #667eea;
      min-width: 200px;
      text-align: center;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    /* RESPONSIVE */
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    @media (max-width: 768px) {
      h1 { font-size: 32px; }
      .tabs { flex-direction: column; }
      .tab-btn { width: 100%; justify-content: center; }
      .card { padding: 20px; }
      table { font-size: 12px; }
      th, td { padding: 10px; }
      .action-btns { flex-direction: column; }
      .action-btns button { width: 100%; }
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    /* ENHANCED FEATURES */
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .info-box {
      background: linear-gradient(135deg, #E3F2FD, #BBDEFB);
      padding: 16px;
      border-radius: 12px;
      margin-bottom: 20px;
      border-left: 4px solid #2196F3;
    }
    .info-box strong {
      color: #1565C0;
      display: block;
      margin-bottom: 5px;
    }
    .empty-state {
      text-align: center;
      padding: 60px 20px;
      color: #999;
    }
    .empty-state-icon {
      font-size: 64px;
      margin-bottom: 20px;
      opacity: 0.3;
    }
  </style>
</head>
<body>
  <div class="loading" id="loading"><div class="spinner"></div></div>
  <div class="modal" id="modal">
    <div class="modal-content" id="modalContent"></div>
  </div>

  <div class="container">
    <div class="header">
      <div class="kapruka-logo">
        <img src="https://play-lh.googleusercontent.com/XPaIW4RsTkd8au1rBlcwAtdyynz9pZyPVn3QPK4gXbboroWxFI3hpVhn18IrIBrUtztj=w240-h480-rw" alt="Kapruka">
      </div>
      <h1>Admin Dashboard</h1>
      <p class="subtitle">Campaign Management System</p>
    </div>

    <!-- Login Screen -->
    <div id="loginScreen" class="login-card">
      <h2>ğŸ” Admin Login</h2>
      <form id="loginForm">
        <div class="form-group">
          <label>Password</label>
          <input type="password" id="adminPassword" required placeholder="Enter admin password">
        </div>
        <button type="submit" class="btn btn-primary" style="width:100%;">Login</button>
      </form>
    </div>

    <!-- Admin Content -->
    <div id="adminContent" class="admin-content">
      <div class="tabs">
        <button class="tab-btn active" onclick="switchTab('requests')">
          ğŸ“‹ Campaign Requests
        </button>
        <button class="tab-btn" onclick="switchTab('products')">
          ğŸ’¡ Product Suggestions
        </button>
        <button class="tab-btn" onclick="switchTab('content')">
          ğŸ“… Content Calendar
        </button>
        <button class="tab-btn" onclick="switchTab('studio')">
          ğŸ¬ Studio Calendar
        </button>
        <button class="tab-btn" onclick="switchTab('hotproducts')">
          ğŸ”¥ Hot Products
        </button>
        <button class="tab-btn" onclick="switchTab('departments')">
          ğŸ¢ Departments
        </button>
        <button class="tab-btn logout" onclick="logout()">
          ğŸšª Logout
        </button>
      </div>

      <!-- Campaign Requests Tab -->
      <div id="tab-requests" class="tab-content active">
        <div class="card">
          <h2>ğŸ“‹ Campaign Requests</h2>
          <div class="table-container">
            <table>
              <thead>
                <tr>
                  <th>Request ID</th>
                  <th>Date</th>
                  <th>Department</th>
                  <th>Month</th>
                  <th>Slot</th>
                  <th>Campaign</th>
                  <th>Status</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="requestsTable">
                <tr><td colspan="8" class="empty-state">
                  <div class="empty-state-icon">ğŸ“‹</div>
                  <div>Loading campaign requests...</div>
                </td></tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- Product Suggestions Tab -->
      <div id="tab-products" class="tab-content">
        <div class="card">
          <h2>ğŸ’¡ Product Suggestions</h2>
          <div class="info-box">
            <strong>ğŸ“Œ Approval Process</strong>
            When you approve a product, you'll select the Facebook page and available time slot from the next 3 weeks.
          </div>
          <div class="table-container">
            <table>
              <thead>
                <tr>
                  <th>Submission ID</th>
                  <th>Date</th>
                  <th>Product Link</th>
                  <th>Category</th>
                  <th>Margin %</th>
                  <th>Status</th>
                  <th>Page Name</th>
                  <th>Slot Date</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="productsTable">
                <tr><td colspan="9" class="empty-state">
                  <div class="empty-state-icon">ğŸ’¡</div>
                  <div>Loading product suggestions...</div>
                </td></tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- Content Calendar Tab -->
      <div id="tab-content" class="tab-content">
        <div class="card">
          <h2>ğŸ“… Add Content Theme</h2>
          <form id="themeForm">
            <div style="display:grid;grid-template-columns:repeat(2,1fr);gap:20px;">
              <div class="form-group">
                <label>Theme Name</label>
                <input type="text" id="themeName" required placeholder="e.g., Valentine's Day">
              </div>
              <div class="form-group">
                <label>Slots Per Day</label>
                <input type="number" id="slotsPerDay" required placeholder="e.g., 3" min="1" max="10" value="3">
              </div>
            </div>
            <div style="display:grid;grid-template-columns:repeat(2,1fr);gap:20px;">
              <div class="form-group">
                <label>Start Date</label>
                <input type="date" id="themeStart" required>
              </div>
              <div class="form-group">
                <label>End Date</label>
                <input type="date" id="themeEnd" required>
              </div>
            </div>
            <div style="display:grid;grid-template-columns:repeat(2,1fr);gap:20px;">
              <div class="form-group">
                <label>Theme Color</label>
                <input type="color" id="themeColor" value="#667eea">
              </div>
              <div class="form-group" style="display:flex;align-items:center;">
                <label style="display:flex;align-items:center;gap:10px;margin:0;cursor:pointer;">
                  <input type="checkbox" id="isSeasonal" style="width:auto;">
                  <span>Seasonal Theme (no categories)</span>
                </label>
              </div>
            </div>
            <button type="submit" class="btn btn-primary">Add Theme</button>
          </form>
        </div>

        <div class="card">
          <h2>ğŸ—‚ï¸ Content Bookings</h2>
          <div class="table-container">
            <table>
              <thead>
                <tr>
                  <th>Date</th>
                  <th>Slot</th>
                  <th>Category</th>
                  <th>Product Code</th>
                  <th>Status</th>
                  <th>Go Live</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="contentTable">
                <tr><td colspan="7" class="empty-state">
                  <div class="empty-state-icon">ğŸ—‚ï¸</div>
                  <div>Loading content bookings...</div>
                </td></tr>
              </tbody>
            </table>
          </div>
        </div>

        <div class="card">
          <h2>ğŸ¨ Themes</h2>
          <div class="table-container">
            <table>
              <thead>
                <tr>
                  <th>Theme</th>
                  <th>Start</th>
                  <th>End</th>
                  <th>Slots/Day</th>
                  <th>Type</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="themesTable">
                <tr><td colspan="6" class="empty-state">
                  <div class="empty-state-icon">ğŸ¨</div>
                  <div>Loading themes...</div>
                </td></tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- Studio Calendar Tab -->
      <div id="tab-studio" class="tab-content">
        <div class="card">
          <div class="calendar-header">
            <h2 style="margin:0;">ğŸ¬ Studio Calendar</h2>
            <button class="btn btn-success" onclick="openAddExtraContentModal()">â• Add Extra Content</button>
          </div>

          <div class="info-box">
            <strong>ğŸ“Œ Studio Production Schedule</strong>
            This shows ALL content slots (empty + booked) from the Content Calendar. Studio team creates content based on these slots.
          </div>

          <div class="month-nav">
            <button onclick="changeStudioMonth(-1)">â—€ Previous</button>
            <h3 id="studioMonthTitle">January 2026</h3>
            <button onclick="changeStudioMonth(1)">Next â–¶</button>
          </div>

          <div id="studioCalendarDisplay" style="margin-top:30px;">
            <div class="empty-state">
              <div class="empty-state-icon">ğŸ¬</div>
              <div>Loading studio calendar...</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Hot Products Tab -->
      <div id="tab-hotproducts" class="tab-content">
        <div class="card">
          <h2>ğŸ”¥ Hot Products Management</h2>
          <p style="color:#666;margin-bottom:25px;">Add and manage hot product suggestions by category</p>

          <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:20px;margin-bottom:30px;">
            <div style="background:linear-gradient(135deg,#E8F5E9,#C8E6C9);padding:20px;border-radius:12px;">
              <div style="color:#2E7D32;font-size:12px;font-weight:600;text-transform:uppercase;margin-bottom:8px;">Total Products</div>
              <div style="color:#1B5E20;font-size:32px;font-weight:700;" id="adminTotalProducts">0</div>
            </div>
            <div style="background:linear-gradient(135deg,#E3F2FD,#BBDEFB);padding:20px;border-radius:12px;">
              <div style="color:#1565C0;font-size:12px;font-weight:600;text-transform:uppercase;margin-bottom:8px;">Listed Products</div>
              <div style="color:#0D47A1;font-size:32px;font-weight:700;" id="adminListedProducts">0</div>
            </div>
            <div style="background:linear-gradient(135deg,#FFF3E0,#FFE0B2);padding:20px;border-radius:12px;">
              <div style="color:#E65100;font-size:12px;font-weight:600;text-transform:uppercase;margin-bottom:8px;">Categories</div>
              <div style="color:#BF360C;font-size:32px;font-weight:700;" id="adminCategoryCount">0</div>
            </div>
          </div>

          <div style="background:#f9f9f9;padding:25px;border-radius:12px;margin-bottom:30px;">
            <h3 style="color:#667eea;margin-bottom:20px;">â• Add New Product</h3>
            <form id="addHotProductForm" style="display:grid;gap:15px;">
              <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:15px;">
                <div>
                  <label style="display:block;color:#667eea;font-weight:600;margin-bottom:8px;font-size:13px;">Category</label>
                  <select id="hotProductCategory" required style="width:100%;padding:12px;border:2px solid #e8e8e8;border-radius:8px;font-size:14px;">
                    <option value="">Select Category</option>
                    <option value="Cakes">Cakes</option>
                    <option value="Flowers">Flowers</option>
                    <option value="Chocolates">Chocolates</option>
                    <option value="Clothing">Clothing</option>
                    <option value="Electronics">Electronics</option>
                    <option value="Fashion">Fashion</option>
                    <option value="Food & Restaurants">Food & Restaurants</option>
                    <option value="Fruits">Fruits</option>
                    <option value="Soft Toys & Kids Toys">Soft Toys & Kids Toys</option>
                    <option value="Grocery & Hampers">Grocery & Hampers</option>
                  </select>
                </div>
                <div>
                  <label style="display:block;color:#667eea;font-weight:600;margin-bottom:8px;font-size:13px;">Product Link</label>
                  <input type="url" id="hotProductLink" required placeholder="https://example.com/product" style="width:100%;padding:12px;border:2px solid #e8e8e8;border-radius:8px;font-size:14px;">
                </div>
                <div>
                  <label style="display:block;color:#667eea;font-weight:600;margin-bottom:8px;font-size:13px;">Sales Count</label>
                  <input type="number" id="hotProductSales" value="0" min="0" style="width:100%;padding:12px;border:2px solid #e8e8e8;border-radius:8px;font-size:14px;">
                </div>
              </div>
              <button type="submit" class="btn btn-primary">â• Add Product</button>
            </form>
          </div>

          <div style="display:flex;gap:15px;margin-bottom:20px;flex-wrap:wrap;">
            <select id="filterCategory" onchange="filterHotProducts()" style="padding:12px;border:2px solid #e8e8e8;border-radius:8px;font-size:14px;flex:1;min-width:200px;">
              <option value="">All Categories</option>
              <option value="Cakes">Cakes</option>
              <option value="Flowers">Flowers</option>
              <option value="Chocolates">Chocolates</option>
              <option value="Clothing">Clothing</option>
              <option value="Electronics">Electronics</option>
              <option value="Fashion">Fashion</option>
            </select>
            <select id="filterListed" onchange="filterHotProducts()" style="padding:12px;border:2px solid #e8e8e8;border-radius:8px;font-size:14px;min-width:150px;">
              <option value="">All Status</option>
              <option value="true">Listed Only</option>
              <option value="false">Unlisted Only</option>
            </select>
            <button onclick="loadHotProducts()" class="btn btn-secondary">ğŸ”„ Refresh</button>
          </div>

          <div class="table-container">
            <table>
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Category</th>
                  <th>Product Link</th>
                  <th>Sales</th>
                  <th>Listed</th>
                  <th>Kapruka Link</th>
                  <th>Created</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="hotProductsTableBody">
                <tr><td colspan="8" class="empty-state">
                  <div class="empty-state-icon">ğŸ”¥</div>
                  <div>Loading hot products...</div>
                </td></tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- Department Config Tab -->
      <div id="tab-departments" class="tab-content">
        <div class="card">
          <h2>ğŸ¢ Add Department</h2>
          <form id="deptForm">
            <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:20px;">
              <div class="form-group">
                <label>Month</label>
                <select id="deptMonth" required>
                  <option value="January 2026">January 2026</option>
                  <option value="February 2026">February 2026</option>
                  <option value="March 2026">March 2026</option>
                  <option value="April 2026">April 2026</option>
                  <option value="May 2026">May 2026</option>
                  <option value="June 2026">June 2026</option>
                  <option value="July 2026">July 2026</option>
                  <option value="August 2026">August 2026</option>
                  <option value="September 2026">September 2026</option>
                  <option value="October 2026">October 2026</option>
                  <option value="November 2026">November 2026</option>
                  <option value="December 2026">December 2026</option>
                </select>
              </div>
              <div class="form-group">
                <label>Department Name</label>
                <input type="text" id="deptName" required placeholder="e.g., Marketing">
              </div>
              <div class="form-group">
                <label>Budget ($k)</label>
                <input type="number" id="deptBudget" required placeholder="e.g., 200">
              </div>
            </div>
            <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:20px;">
              <div class="form-group">
                <label>Slots</label>
                <input type="number" id="deptSlots" required placeholder="e.g., 10">
              </div>
              <div class="form-group">
                <label>Color</label>
                <input type="color" id="deptColor" value="#E8F5E9">
              </div>
              <div class="form-group">
                <label>Active</label>
                <select id="deptActive">
                  <option value="Yes">Yes</option>
                  <option value="No">No</option>
                </select>
              </div>
            </div>
            <button type="submit" class="btn btn-primary">Add Department</button>
          </form>
        </div>

        <div class="card">
          <h2>ğŸ“‹ Existing Departments</h2>
          <div class="table-container">
            <table>
              <thead>
                <tr>
                  <th>Month</th>
                  <th>Department</th>
                  <th>Budget</th>
                  <th>Slots</th>
                  <th>Active</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="deptsTable">
                <tr><td colspan="6" class="empty-state">
                  <div class="empty-state-icon">ğŸ¢</div>
                  <div>Loading departments...</div>
                </td></tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="js/supabase-api.js"></script>
  <script>
    let isLoggedIn = false;
    let allHotProducts = [];
    let currentStudioMonth = 1;
    let currentStudioYear = 2026;

    function showLoading() {
      document.getElementById('loading').style.display = 'flex';
    }

    function hideLoading() {
      document.getElementById('loading').style.display = 'none';
    }

    function showModal(content) {
      document.getElementById('modalContent').innerHTML = content;
      document.getElementById('modal').style.display = 'flex';
    }

    function closeModal() {
      document.getElementById('modal').style.display = 'none';
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // LOGIN / LOGOUT
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    document.getElementById('loginForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const password = document.getElementById('adminPassword').value;

      if (verifyAdminPassword(password)) {
        isLoggedIn = true;
        document.getElementById('loginScreen').style.display = 'none';
        document.getElementById('adminContent').style.display = 'block';
        loadAllData();
      } else {
        alert('Invalid password');
      }
    });

    function logout() {
      isLoggedIn = false;
      document.getElementById('loginScreen').style.display = 'block';
      document.getElementById('adminContent').style.display = 'none';
      document.getElementById('adminPassword').value = '';
    }

    function switchTab(tab) {
      document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
      document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
      event.target.classList.add('active');
      document.getElementById('tab-' + tab).classList.add('active');

      if (tab === 'content') {
        loadContentData();
      } else if (tab === 'hotproducts') {
        loadHotProducts();
      } else if (tab === 'studio') {
        loadStudioCalendar();
      }
    }

    async function loadAllData() {
      loadRequests();
      loadProducts();
      loadDepartments();
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // CAMPAIGN REQUESTS
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    async function loadRequests() {
      try {
        const requests = await getAllRequests();
        const tbody = document.getElementById('requestsTable');

        if (requests.length === 0) {
          tbody.innerHTML = '<tr><td colspan="8" class="empty-state"><div class="empty-state-icon">ğŸ“‹</div><div>No requests yet</div></td></tr>';
          return;
        }

        tbody.innerHTML = requests.map(r => {
          let badgeClass = 'badge-working';
          if (r.status === 'Live') badgeClass = 'badge-live';
          if (r.status === 'Rejected') badgeClass = 'badge-rejected';
          if (r.status === 'Completed') badgeClass = 'badge-completed';

          return `
            <tr>
              <td><strong>${r.requestId}</strong></td>
              <td>${new Date(r.timestamp).toLocaleDateString()}</td>
              <td>${r.department}</td>
              <td>${r.month}</td>
              <td>${r.slot}</td>
              <td>${r.campaign}</td>
              <td><span class="badge ${badgeClass}">${r.status}</span></td>
              <td>
                <div class="action-btns">
                  <button class="btn btn-warning" onclick="updateStatus(${r.row}, 'Working')">Working</button>
                  <button class="btn btn-success" onclick="updateStatus(${r.row}, 'Live')">Live</button>
                  <button class="btn btn-secondary" onclick="updateStatus(${r.row}, 'Completed')">Complete</button>
                  <button class="btn btn-danger" onclick="updateStatus(${r.row}, 'Rejected')">Reject</button>
                </div>
              </td>
            </tr>
          `;
        }).join('');
      } catch (error) {
        document.getElementById('requestsTable').innerHTML = 
          '<tr><td colspan="8" class="empty-state"><div class="empty-state-icon">âŒ</div><div>Error: ' + error.message + '</div></td></tr>';
      }
    }

    async function updateStatus(row, status) {
      const reviewer = prompt('Enter your name:');
      if (!reviewer) return;

      const comments = status === 'Rejected' ? prompt('Rejection reason (optional):') : '';

      try {
        showLoading();
        await updateRequestStatus(row, status, reviewer, comments || '');
        hideLoading();
        alert(`âœ… Status updated to: ${status}`);
        loadRequests();
      } catch (error) {
        hideLoading();
        alert('Error: ' + error.message);
      }
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // PRODUCT SUGGESTIONS WITH SLOT SELECTION
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    async function loadProducts() {
      try {
        const products = await getAllProductSuggestions();
        const tbody = document.getElementById('productsTable');

        if (products.length === 0) {
          tbody.innerHTML = '<tr><td colspan="9" class="empty-state"><div class="empty-state-icon">ğŸ’¡</div><div>No products yet</div></td></tr>';
          return;
        }

        tbody.innerHTML = products.map(p => {
          let badgeClass = p.status === 'Approved' ? 'badge-approved' : 
                          p.status === 'Rejected' ? 'badge-rejected' : 'badge-pending';

          const actions = p.status === 'Approved' 
            ? `<button class="btn btn-secondary" onclick="viewProduct(${p.row})">View</button>`
            : `
              <div class="action-btns">
                <button class="btn btn-success" onclick="reviewProduct(${p.row}, 'Approved')">âœ“ Approve</button>
                <button class="btn btn-danger" onclick="reviewProduct(${p.row}, 'Rejected')">âœ— Reject</button>
              </div>
            `;

          const slotInfo = p.slotDate && p.slotNumber 
            ? `${p.slotDate} (Slot ${p.slotNumber})` 
            : (p.goLiveDate || '-');

          return `
            <tr>
              <td><strong>${p.submissionId}</strong></td>
              <td>${new Date(p.timestamp).toLocaleDateString()}</td>
              <td><a href="${p.productLink}" target="_blank" style="color:#667eea;">ğŸ”— View</a></td>
              <td>${p.category}</td>
              <td>${p.margin}%</td>
              <td><span class="badge ${badgeClass}">${p.status}</span></td>
              <td>${p.assignedPage || '-'}</td>
              <td>${slotInfo}</td>
              <td>${actions}</td>
            </tr>
          `;
        }).join('');
      } catch (error) {
        document.getElementById('productsTable').innerHTML = 
          '<tr><td colspan="9" class="empty-state"><div class="empty-state-icon">âŒ</div><div>Error: ' + error.message + '</div></td></tr>';
      }
    }

    async function reviewProduct(row, status) {
      const reviewerName = prompt('Enter your name:');
      if (!reviewerName) return;

      if (status === 'Approved') {
        showApprovalModal(row, reviewerName);
      } else {
        const rejectionReason = prompt('Rejection Reason:');
        if (!rejectionReason) return;

        try {
          showLoading();
          await updateProductReview(row, {
            status: 'Rejected',
            reviewerName,
            rejectionReason
          });
          hideLoading();
          alert('âœ… Product rejected!');
          loadProducts();
        } catch (error) {
          hideLoading();
          alert('Error: ' + error.message);
        }
      }
    }

    async function showApprovalModal(row, reviewerName) {
      try {
        showLoading();
        
        const pageNames = getAllPageNames();
        
        const radioButtons = pageNames.map(page => {
          const schedule = page === 'Kapruka FB Leads' ? '(Monday)' :
                          page === 'Electronic Factory' ? '(Tuesday)' :
                          page === 'Social Mart' ? '(Wednesday)' :
                          page === 'Fashion Factory' ? '(Thursday)' :
                          page === 'Toys Factory' ? '(Friday)' :
                          page === 'Handbag Factory' ? '(Saturday)' :
                          page === 'TikTok Video' ? '(Sunday)' : '';
          
          return `
            <label class="radio-label">
              <input type="radio" name="pageName" value="${page}" required onchange="loadPageSlots('${page}')">
              <span>${page} <small style="color:#999;">${schedule}</small></span>
            </label>
          `;
        }).join('');

        const content = `
          <button class="close-modal" onclick="closeModal()">Ã—</button>
          <h3>âœ… Approve Product</h3>
          <form id="approvalForm">
            <div class="form-group">
              <label>Select Page *</label>
              <div class="radio-group" style="max-height:300px;overflow-y:auto;">
                ${radioButtons}
              </div>
            </div>

            <div id="slotSelectionContainer" style="display:none;">
              <div class="form-group">
                <label>Select Available Slot (Next 3 Weeks) *</label>
                <div id="slotsDisplay" style="max-height:400px;overflow-y:auto;padding:15px;background:#f9f9f9;border-radius:12px;">
                  <p style="text-align:center;color:#999;">Select a page first</p>
                </div>
              </div>
            </div>

            <div class="form-group">
              <label>Go Live Date *</label>
              <input type="date" id="goLiveDate" required>
            </div>

            <input type="hidden" id="selectedSlotDate">
            <input type="hidden" id="selectedSlotNumber">
            
            <button type="submit" class="btn btn-success" style="width:100%;margin-top:20px;">
              âœ… Approve & Assign Slot
            </button>
          </form>
        `;

        hideLoading();
        showModal(content);

        window.loadPageSlots = async function(pageName) {
          try {
            showLoading();
            const slotData = await getAvailableSlotsForPage(pageName);
            hideLoading();

            document.getElementById('slotSelectionContainer').style.display = 'block';
            
            const slotsHTML = `
              <h4 style="color:#667eea;margin-bottom:15px;">
                ğŸ“… ${slotData.weekday} Slots (Next 3 Weeks)
              </h4>
              ${slotData.slots.map(slot => {
                const dateObj = new Date(slot.date);
                const formattedDate = dateObj.toLocaleDateString('en-US', { 
                  month: 'short', 
                  day: 'numeric', 
                  year: 'numeric' 
                });
                
                const slotClass = slot.available ? 'slot-available' : 'slot-booked';
                const slotIcon = slot.available ? 'â—‹' : 'â—';
                const slotStatus = slot.available ? 'Available' : `Booked: ${slot.bookedBy}`;

                return `
                  <div class="slot-item ${slotClass}" 
                       onclick="selectSlot('${slot.date}', ${slot.slotNumber}, ${slot.available})"
                       style="${!slot.available ? 'cursor:not-allowed;' : ''}">
                    <div style="display:flex;justify-content:space-between;align-items:center;">
                      <div>
                        <strong style="color:#667eea;">${formattedDate} - Slot ${slot.slotNumber}</strong>
                        <div style="font-size:12px;color:#666;margin-top:4px;">${slotStatus}</div>
                      </div>
                      <span style="font-size:24px;color:${slot.available ? '#4CAF50' : '#ccc'};">${slotIcon}</span>
                    </div>
                  </div>
                `;
              }).join('')}
            `;

            document.getElementById('slotsDisplay').innerHTML = slotsHTML;
          } catch (error) {
            hideLoading();
            alert('Error loading slots: ' + error.message);
          }
        };

        window.selectSlot = function(date, slotNumber, available) {
          if (!available) return;

          document.querySelectorAll('.slot-item').forEach(el => {
            el.classList.remove('selected');
          });

          event.currentTarget.classList.add('selected');

          document.getElementById('selectedSlotDate').value = date;
          document.getElementById('selectedSlotNumber').value = slotNumber;
          document.getElementById('goLiveDate').value = date;
        };

        document.getElementById('approvalForm').addEventListener('submit', async (e) => {
          e.preventDefault();

          const selectedPage = document.querySelector('input[name="pageName"]:checked');
          const slotDate = document.getElementById('selectedSlotDate').value;
          const slotNumber = document.getElementById('selectedSlotNumber').value;
          const goLiveDate = document.getElementById('goLiveDate').value;

          if (!selectedPage) {
            alert('Please select a page');
            return;
          }

          if (!slotDate || !slotNumber) {
            alert('Please select an available slot');
            return;
          }

          try {
            showLoading();
            await updateProductReviewWithSlot(row, {
              status: 'Approved',
              reviewerName: reviewerName,
              assignedPage: selectedPage.value,
              goLiveDate: goLiveDate,
              slotDate: slotDate,
              slotNumber: parseInt(slotNumber)
            });

            hideLoading();
            closeModal();
            alert(`âœ… Product approved!\n\nPage: ${selectedPage.value}\nSlot: ${slotDate} - Slot ${slotNumber}\nGo Live: ${goLiveDate}`);
            loadProducts();
          } catch (error) {
            hideLoading();
            alert('Error: ' + error.message);
          }
        });

      } catch (error) {
        hideLoading();
        alert('Error: ' + error.message);
      }
    }

    function viewProduct(row) {
      alert('View product details (feature coming soon)');
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // CONTENT CALENDAR
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    async function loadContentData() {
      loadContentBookings();
      loadThemes();
    }

    async function loadContentBookings() {
      try {
        const bookings = await getAllContentBookings();
        const tbody = document.getElementById('contentTable');

        if (bookings.length === 0) {
          tbody.innerHTML = '<tr><td colspan="7" class="empty-state"><div class="empty-state-icon">ğŸ—‚ï¸</div><div>No content bookings yet</div></td></tr>';
          return;
        }

        tbody.innerHTML = bookings.slice(0, 50).map(b => {
          let badgeClass = b.status === 'Approved' ? 'badge-approved' : 
                          b.status === 'Rejected' ? 'badge-rejected' : 'badge-pending';

          const actions = b.status === 'Pending' 
            ? `
              <div class="action-btns">
                <button class="btn btn-success" onclick="approveContentBooking(${b.id})">Approve</button>
                <button class="btn btn-danger" onclick="rejectContentBooking(${b.id})">Reject</button>
              </div>
            `
            : `<span class="badge ${badgeClass}">${b.status}</span>`;

          return `
            <tr>
              <td>${b.date}</td>
              <td>${b.slotNumber}</td>
              <td>${b.category}</td>
              <td><strong>${b.productCode}</strong></td>
              <td><span class="badge ${badgeClass}">${b.status}</span></td>
              <td>${b.goLiveDate || '-'}</td>
              <td>${actions}</td>
            </tr>
          `;
        }).join('');
      } catch (error) {
        document.getElementById('contentTable').innerHTML = 
          '<tr><td colspan="7" class="empty-state"><div class="empty-state-icon">âŒ</div><div>Error: ' + error.message + '</div></td></tr>';
      }
    }

    async function approveContentBooking(id) {
      const reviewer = prompt('Enter your name:');
      if (!reviewer) return;

      const goLiveDate = prompt('Go Live Date (YYYY-MM-DD):');
      if (!goLiveDate) return;

      try {
        showLoading();
        await updateContentBooking(id, {
          status: 'Approved',
          reviewer: reviewer,
          goLiveDate: goLiveDate
        });
        hideLoading();
        alert('âœ… Content booking approved!');
        loadContentBookings();
      } catch (error) {
        hideLoading();
        alert('Error: ' + error.message);
      }
    }

    async function rejectContentBooking(id) {
      const reviewer = prompt('Enter your name:');
      if (!reviewer) return;

      const reason = prompt('Rejection reason:');
      if (!reason) return;

      try {
        showLoading();
        await updateContentBooking(id, {
          status: 'Rejected',
          reviewer: reviewer,
          rejectionReason: reason
        });
        hideLoading();
        alert('âœ… Content booking rejected!');
        loadContentBookings();
      } catch (error) {
        hideLoading();
        alert('Error: ' + error.message);
      }
    }

    async function loadThemes() {
      try {
        const themes = await getAllThemes();
        const tbody = document.getElementById('themesTable');

        if (themes.length === 0) {
          tbody.innerHTML = '<tr><td colspan="6" class="empty-state"><div class="empty-state-icon">ğŸ¨</div><div>No themes yet</div></td></tr>';
          return;
        }

        tbody.innerHTML = themes.map(t => `
          <tr>
            <td><strong>${t.theme_name}</strong></td>
            <td>${t.start_date}</td>
            <td>${t.end_date}</td>
            <td>${t.slots_per_day}</td>
            <td>${t.is_seasonal ? 'ğŸŒŸ Seasonal' : 'ğŸ“… Regular'}</td>
            <td>
              <button class="btn btn-danger" onclick="deleteThemeConfirm(${t.id})">Delete</button>
            </td>
          </tr>
        `).join('');
      } catch (error) {
        document.getElementById('themesTable').innerHTML = 
          '<tr><td colspan="6" class="empty-state"><div class="empty-state-icon">âŒ</div><div>Error: ' + error.message + '</div></td></tr>';
      }
    }

    document.getElementById('themeForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      
      try {
        showLoading();
        await addTheme({
          themeName: document.getElementById('themeName').value,
          startDate: document.getElementById('themeStart').value,
          endDate: document.getElementById('themeEnd').value,
          slotsPerDay: document.getElementById('slotsPerDay').value,
          themeColor: document.getElementById('themeColor').value,
          isSeasonal: document.getElementById('isSeasonal').checked
        });
        hideLoading();
        alert('âœ… Theme added successfully!');
        document.getElementById('themeForm').reset();
        loadThemes();
      } catch (error) {
        hideLoading();
        alert('Error: ' + error.message);
      }
    });

    async function deleteThemeConfirm(id) {
      if (!confirm('Delete this theme? This will also delete all associated slots.')) return;

      try {
        showLoading();
        await deleteTheme(id);
        hideLoading();
        alert('âœ… Theme deleted!');
        loadThemes();
      } catch (error) {
        hideLoading();
        alert('Error: ' + error.message);
      }
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // STUDIO CALENDAR
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    async function loadStudioCalendar() {
      try {
        showLoading();
        const data = await getStudioCalendarData(currentStudioMonth, currentStudioYear);
        
        const months = ['January','February','March','April','May','June','July','August','September','October','November','December'];
        document.getElementById('studioMonthTitle').textContent = `${months[currentStudioMonth - 1]} ${currentStudioYear}`;

        const display = document.getElementById('studioCalendarDisplay');

        if (data.calendarItems.length === 0) {
          display.innerHTML = '<div class="empty-state"><div class="empty-state-icon">ğŸ¬</div><div>No content for this month</div></div>';
          hideLoading();
          return;
        }

        // Group by date
        const byDate = {};
        data.calendarItems.forEach(item => {
          if (!byDate[item.date]) byDate[item.date] = [];
          byDate[item.date].push(item);
        });

        let html = '';
        Object.keys(byDate).sort().forEach(date => {
          const items = byDate[date];
          const dateObj = new Date(date);
          const formattedDate = dateObj.toLocaleDateString('en-US', { 
            weekday: 'long', 
            month: 'long', 
            day: 'numeric', 
            year: 'numeric' 
          });

          html += `
            <div style="background:white;padding:25px;border-radius:16px;margin-bottom:20px;box-shadow:0 4px 15px rgba(0,0,0,0.08);">
              <h3 style="color:#667eea;margin-bottom:20px;font-size:18px;">ğŸ“… ${formattedDate}</h3>
              <div style="display:grid;gap:15px;">
                ${items.map(item => {
                  const statusColor = item.status === 'booked' ? '#4CAF50' : 
                                     item.status === 'empty' ? '#FF9800' : '#999';
                  const statusText = item.status === 'booked' ? 'â— Booked' : 
                                    item.status === 'empty' ? 'â—‹ Empty' : 'â— Pending';

                  return `
                    <div style="padding:16px;background:${item.status === 'empty' ? '#FFF3E0' : '#E8F5E9'};
                                border-radius:12px;border-left:4px solid ${statusColor};">
                      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
                        <strong style="color:#333;">Slot ${item.slotNumber} - ${item.category || item.type}</strong>
                        <span style="color:${statusColor};font-weight:600;font-size:12px;">${statusText}</span>
                      </div>
                      ${item.productCode ? `<div style="font-size:13px;color:#666;">Product: ${item.productCode}</div>` : ''}
                      ${item.pageName ? `<div style="font-size:13px;color:#666;">Page: ${item.pageName}</div>` : ''}
                      ${item.theme ? `<div style="font-size:13px;color:#666;">Theme: ${item.theme}</div>` : ''}
                    </div>
                  `;
                }).join('')}
              </div>
            </div>
          `;
        });

        display.innerHTML = html;
        hideLoading();
      } catch (error) {
        hideLoading();
        document.getElementById('studioCalendarDisplay').innerHTML = 
          '<div class="empty-state"><div class="empty-state-icon">âŒ</div><div>Error: ' + error.message + '</div></div>';
      }
    }

    function changeStudioMonth(delta) {
      currentStudioMonth += delta;
      if (currentStudioMonth > 12) {
        currentStudioMonth = 1;
        currentStudioYear++;
      } else if (currentStudioMonth < 1) {
        currentStudioMonth = 12;
        currentStudioYear--;
      }
      loadStudioCalendar();
    }

    function openAddExtraContentModal() {
      alert('Add extra content feature (coming soon)');
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // HOT PRODUCTS
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    async function loadHotProducts() {
      try {
        showLoading();
        allHotProducts = await getAllHotProducts();
        
        const stats = await getHotProductsStats();
        document.getElementById('adminTotalProducts').textContent = stats.totalProducts;
        document.getElementById('adminListedProducts').textContent = stats.listedProducts;
        document.getElementById('adminCategoryCount').textContent = Object.keys(stats.byCategory).length;

        filterHotProducts();
        hideLoading();
      } catch (error) {
        hideLoading();
        alert('Error loading hot products: ' + error.message);
      }
    }

    function filterHotProducts() {
      const category = document.getElementById('filterCategory').value;
      const listed = document.getElementById('filterListed').value;

      let filtered = allHotProducts;

      if (category) {
        filtered = filtered.filter(p => p.category === category);
      }

      if (listed !== '') {
        const isListed = listed === 'true';
        filtered = filtered.filter(p => p.listed === isListed);
      }

      const tbody = document.getElementById('hotProductsTableBody');

      if (filtered.length === 0) {
        tbody.innerHTML = '<tr><td colspan="8" class="empty-state"><div class="empty-state-icon">ğŸ”¥</div><div>No products found</div></td></tr>';
        return;
      }

      tbody.innerHTML = filtered.map(p => `
        <tr>
          <td>${p.id}</td>
          <td>${p.category}</td>
          <td><a href="${p.product_link}" target="_blank" style="color:#667eea;">ğŸ”— View</a></td>
          <td>${p.sales_count || 0}</td>
          <td><span class="badge ${p.listed ? 'badge-approved' : 'badge-pending'}">${p.listed ? 'Listed' : 'Unlisted'}</span></td>
          <td>${p.kapruka_link ? `<a href="${p.kapruka_link}" target="_blank" style="color:#667eea;">View</a>` : '-'}</td>
          <td>${new Date(p.created_at).toLocaleDateString()}</td>
          <td>
            <div class="action-btns">
              <button class="btn btn-success" onclick="markAsListed(${p.id})">Mark Listed</button>
              <button class="btn btn-danger" onclick="deleteHotProductConfirm(${p.id})">Delete</button>
            </div>
          </td>
        </tr>
      `).join('');
    }

    document.getElementById('addHotProductForm').addEventListener('submit', async (e) => {
      e.preventDefault();

      try {
        showLoading();
        await addHotProduct({
          category: document.getElementById('hotProductCategory').value,
          productLink: document.getElementById('hotProductLink').value,
          salesCount: document.getElementById('hotProductSales').value
        });
        hideLoading();
        alert('âœ… Hot product added!');
        document.getElementById('addHotProductForm').reset();
        loadHotProducts();
      } catch (error) {
        hideLoading();
        alert('Error: ' + error.message);
      }
    });

    async function markAsListed(id) {
      const kapruka_link = prompt('Enter Kapruka product link:');
      if (!kapruka_link) return;

      try {
        showLoading();
        await updateHotProduct(id, {
          listed: true,
          kapruka_link: kapruka_link
        });
        hideLoading();
        alert('âœ… Product marked as listed!');
        loadHotProducts();
      } catch (error) {
        hideLoading();
        alert('Error: ' + error.message);
      }
    }

    async function deleteHotProductConfirm(id) {
      if (!confirm('Delete this hot product?')) return;

      try {
        showLoading();
        await deleteHotProduct(id);
        hideLoading();
        alert('âœ… Hot product deleted!');
        loadHotProducts();
      } catch (error) {
        hideLoading();
        alert('Error: ' + error.message);
      }
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // DEPARTMENTS
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    async function loadDepartments() {
      try {
        const depts = await getAllDepartments();
        const tbody = document.getElementById('deptsTable');

        if (depts.length === 0) {
          tbody.innerHTML = '<tr><td colspan="6" class="empty-state"><div class="empty-state-icon">ğŸ¢</div><div>No departments yet</div></td></tr>';
          return;
        }

        tbody.innerHTML = depts.map(d => `
          <tr>
            <td>${d.month}</td>
            <td><strong>${d.department}</strong></td>
            <td>$${d.budget}k</td>
            <td>${d.slots}</td>
            <td><span class="badge ${d.active === 'Yes' ? 'badge-approved' : 'badge-pending'}">${d.active}</span></td>
            <td>
              <button class="btn btn-danger" onclick="deleteDeptConfirm(${d.row})">Delete</button>
            </td>
          </tr>
        `).join('');
      } catch (error) {
        document.getElementById('deptsTable').innerHTML = 
          '<tr><td colspan="6" class="empty-state"><div class="empty-state-icon">âŒ</div><div>Error: ' + error.message + '</div></td></tr>';
      }
    }

    document.getElementById('deptForm').addEventListener('submit', async (e) => {
      e.preventDefault();

      try {
        showLoading();
        await addDepartment({
          month: document.getElementById('deptMonth').value,
          department: document.getElementById('deptName').value,
          budget: document.getElementById('deptBudget').value,
          slots: document.getElementById('deptSlots').value,
          color: document.getElementById('deptColor').value,
          active: document.getElementById('deptActive').value
        });
        hideLoading();
        alert('âœ… Department added!');
        document.getElementById('deptForm').reset();
        loadDepartments();
      } catch (error) {
        hideLoading();
        alert('Error: ' + error.message);
      }
    });

    async function deleteDeptConfirm(row) {
      if (!confirm('Delete this department?')) return;

      try {
        showLoading();
        await deleteDepartment(row);
        hideLoading();
        alert('âœ… Department deleted!');
        loadDepartments();
      } catch (error) {
        hideLoading();
        alert('Error: ' + error.message);
      }
    }
  </script>
</body>
</html>
